<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OG Kash - Finanzas Personales</title>
    <link rel="stylesheet" href="main.css">
    
    <!-- ✅ CSS crítico inline para evitar problemas de carga -->
    <style>
        .hidden {
            display: none !important;
        }
        
        /* Asegurar que solo una pantalla sea visible a la vez */
        .screen {
            display: block;
        }
        
        .screen.hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <!-- PANTALLA DE AUTENTICACIÓN -->
    <div id="auth-screen" class="screen">
       <div class="logo-container">
          <img src="./assets/logo_OG.png" alt="OG Kash Logo" class="logo-ogkash">
       </div>

        <form id="login-form" class="auth-form">
            <label for="login-user"></label>
            <input type="text" id="login-user" name="username" placeholder="Username:" autocomplete="username" required>
            <label for="login-password"></label>
            <input type="password" id="login-password" name="password" placeholder="Password:" autocomplete="current-password" required>
            <p class="forgot-password">Forgot your password?</p>
            <button type="submit" class="btn primary">Login</button>
            <button type="button" class="btn secondary" id="show-signup">Sign up</button>
        </form>

        <form id="signup-form" class="auth-form hidden">
            <label for="signup-user"></label>
            <input type="text" id="signup-user" name="new-username" placeholder="Username:" autocomplete="username" required>
            <label for="signup-password"></label>
            <input type="password" id="signup-password" name="new-password" placeholder="Password:" autocomplete="new-password" required>
            <button type="submit" class="btn primary">Sign up</button>
            <button type="button" class="btn secondary" id="show-login">Back to Login</button>
        </form>
    </div>

    <!-- PANTALLA DE DASHBOARD -->
    <div id="dashboard-screen" class="screen hidden">
        <header>
            <h1 class="header-title">Dashboard</h1>
            <p>Hello, <span id="current-user">Usuario</span></p>
        </header>

        <!-- Balance Summary -->
        <section class="balance-summary">
            <div class="balance-card">
                <h3>Balance</h3>
                <p id="current-balance" class="balance-amount">$0,00</p>
            </div>
            <div class="balance-details-cards">
                <div class="detail-card">
                    <span class="detail-label">Income:</span>
                    <strong id="total-ingresos">$0,00</strong>
                </div>
                <div class="detail-card">
                    <span class="detail-label">Expenses:</span>
                    <strong id="total-gastos">$0,00</strong>
                </div>
            </div>
        </section>

        <section class="quick-actions">
            <button class="action-btn income-btn" id="quick-add-income">+ Income</button>
            <button class="action-btn expense-btn" id="quick-add-expense">- Expense</button>
            <button class="action-btn budget-btn" id="manage-budgets">Budgets</button>
            <button class="action-btn descriptions-btn" id="manage-descriptions">Descriptions</button>
            <button class="action-btn report-btn" id="view-reports">Reports</button>
        </section>

        <section class="transaction-list-summary">
            <h3>Recent transactions</h3>
            <ul id="transaction-list">
                <li>No transactions yet.</li>
            </ul>
        </section>

        <button id="logout-btn" class="btn tertiary">Log Out</button>
    </div>

    <!-- PANTALLA DE INGRESOS -->
    <div id="income-screen" class="screen hidden">
        <header>
            <button id="back-from-income" class="back-btn">←</button>
            <h1 class="header-title">add income</h1>
        </header>

        <form id="income-form">
            <label for="income-amount">amount ($):</label>
            <input type="text" id="income-amount" placeholder="0,00" required>

            <label for="income-category">Category:</label>
            <select id="income-category" required>
                <option value="">Select a category</option>
            </select>

            <label for="income-description">Description:</label>
            <input type="text" id="income-description" required>

            <label for="income-date">Date:</label>
            <input type="date" id="income-date" required>

            <label for="income-method">Payment Method:</label>
            <select id="income-method" required>
                <option value="Efectivo">Cash</option>
                <option value="Transferencia">Transfer</option>
                <option value="Tarjeta">Card</option>
                <option value="Cheque">Check</option>
            </select>

            <button type="submit" class="btn primary">Save Income</button>
        </form>

        <section class="income-list">
            <h3>My Income</h3>
            <ul id="income-list-items"></ul>
        </section>
    </div>

    <!-- PANTALLA DE GASTOS -->
    <div id="expense-screen" class="screen hidden">
        <header>
            <button id="back-from-expense" class="back-btn">←</button>
            <h1 class="header-title">New Expense</h1>
        </header>

        <form id="expense-form">
            <label for="expense-amount">Amount ($):</label>
            <input type="text" id="expense-amount" placeholder="0,00" required>

            <label for="expense-category">Category:</label>
            <select id="expense-category" required>
                <option value="">Select a category</option>
            </select>

            <label for="expense-description">Description:</label>
            <input type="text" id="expense-description" required>

            <label for="expense-date">Date:</label>
            <input type="date" id="expense-date" required>

            <label for="expense-method">Payment Method:</label>
            <select id="expense-method" required>
                <option value="Efectivo">Cash</option>
                <option value="Transferencia">Transfer</option>
                <option value="Tarjeta">Card</option>
                <option value="Débito">Debit</option>
            </select>

            <button type="submit" class="btn primary">Save Expense</button>
        </form>

        <section class="expense-list">
            <h3>My Expenses</h3>
            <ul id="expense-list-items"></ul>
        </section>
    </div>

    <!-- PANTALLA DE PRESUPUESTOS -->
    <div id="budget-screen" class="screen hidden">
        <header>
            <button id="back-from-budget" class="back-btn">←</button>
            <h1 class="header-title">Budgets</h1>
        </header>

        <button id="show-budget-form" class="btn secondary">+ Create Budget</button>

        <form id="budget-form" class="hidden">
            <h3>New Budget</h3>

            <label for="budget-category">Category:</label>
            <select id="budget-category" required>
                <option value="">Select a category</option>
            </select>

            <label for="budget-amount">Limit Amount ($):</label>
            <input type="text" id="budget-amount" placeholder="0,00" required>

            <label for="budget-start">Start Date:</label>
            <input type="date" id="budget-start" required>

            <label for="budget-end">End Date:</label>
            <input type="date" id="budget-end" required>

            <button type="submit" class="btn primary">Save Budget</button>
            <button type="button" id="cancel-budget" class="btn secondary">Cancel</button>
        </form>

        <section class="budget-list">
            <h3>My Budgets</h3>
            <div id="budget-list-items"></div>
        </section>
    </div>

    <!-- PANTALLA DE REPORTES -->
    <div id="reports-screen" class="screen hidden">
        <div class="logo-container">
            <img src="./assets/logo_OG.png" alt="OG Kash Logo" class="logo-ogkash" style="width: 80px;">
        </div>

        <h2 class="report-title">Balance Overview</h2>

        <!-- Gráfico -->
        <section class="report-chart">
            <canvas id="financeChart"></canvas>
            <div class="report-chart-legend">
            </div>
        </section>

        <!-- Botón de agregar ingreso -->
        <button class="report-add-btn" id="report-add-income">Add Income</button>

        <!-- Resumen numérico -->
        <section class="report-summary">
            <div class="report-card balance-card">
                <h3>Total Balance:</h3>
                <p class="report-amount" id="report-balance">$0,00</p>
            </div>
            <div class="report-card income-card">
                <h3>Total Income</h3>
                <p class="report-amount" id="report-ingresos">$0,00</p>
            </div>
            <div class="report-card expense-card">
                <h3>Total Expenses</h3>
                <p class="report-amount" id="report-gastos">$0,00</p>
            </div>
        </section>

        <!-- ✅ NUEVA SECCIÓN: Filtros y lista de transacciones -->
        <section class="report-transactions">
            <div class="report-filters">
                <h3>Transactions <span id="filter-label">(All)</span></h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="income">Income</button>
                    <button class="filter-btn" data-filter="expense">Expenses</button>
                </div>
            </div>
            <ul id="report-transaction-list" class="transaction-list">
                <li>No transactions to show.</li>
            </ul>
        </section>

        <!-- Botón de volver -->
        <button id="back-from-reports" class="btn tertiary" style="margin-top: 30px;">Back to Dashboard</button>
    </div>

    <!-- PANTALLA DE DESCRIPCIONES -->
    <div id="descriptions-screen" class="screen hidden">
        <header>
            <button id="back-from-descriptions" class="back-btn">←</button>
            <h1 class="header-title">Descriptions</h1>
        </header>

        <div class="tabs-container">
            <button class="tab-btn active" data-type="gasto">Expenses</button>
            <button class="tab-btn" data-type="ingreso">Income</button>
        </div>

        <button id="show-description-form" class="btn secondary">+ New Description</button>

        <div id="description-form-container" class="form-container hidden">
            <form id="description-form">
                <h3 id="form-title">New Description</h3>

                <input type="hidden" id="description-id">
                <input type="hidden" id="description-type" value="expense">

                <label for="description-text">Description:</label>
                <input type="text" id="description-text" placeholder="Ej: Supermercado" required>

                <label for="description-category">Category:</label>
                <select id="description-category">
                    <option value="">Uncategorized</option>
                </select>

                <div class="form-actions">
                    <button type="submit" class="btn primary">Save</button>
                    <button type="button" id="cancel-description" class="btn secondary">Cancel</button>
                </div>
            </form>
        </div>

        <section class="descriptions-list">
            <h3>My Descriptions</h3>
            <input type="text" id="search-descriptions" placeholder="Search...">
            <ul id="descriptions-list-items">
                <li class="no-data">No descriptions</li>
            </ul>
        </section>
    </div>

    <!-- ✅ Scripts al final del body - ORDEN CORRECTO -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script.js"></script>

</body>
</html>